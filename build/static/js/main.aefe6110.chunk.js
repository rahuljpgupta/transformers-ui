(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{377:function(e,t,a){},378:function(e,t,a){},402:function(e,t,a){var s={"./bg-BG.json":403,"./ca-ES.json":404,"./cs-CZ.json":405,"./de-DE.json":406,"./en-US.json":272,"./es-ES.json":407,"./et-EE.json":408,"./fi-FI.json":409,"./fr-FR.json":410,"./he-IL.json":411,"./it-IT.json":412,"./ja-JP.json":413,"./ko-KR.json":414,"./nb-NO.json":415,"./nn-NO.json":416,"./pl-PL.json":417,"./pt-BR.json":418,"./ru-RU.json":419,"./sv-SE.json":420,"./tr-TR.json":421,"./zh-CN.json":422};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=402},601:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(1),r=a.n(n),c=a(28),l=a.n(c),i=(a(377),a(176)),o=a(177),d=a(216),j=a(207),h=(a(378),a(619)),u=a(620),b=a(335),g=a(147),C=a.n(g),p=a(336),f=(a(423),a(625));var O=function(e){var t=e.handleChartSelection,a=e.selectedChart,n=function(e){t(e)};return Object(s.jsxs)(f.a,{drop:"right",children:[Object(s.jsx)(f.a.Toggle,{variant:"success",id:"dropdown-basic",children:"Chart Type - ".concat(a)}),Object(s.jsx)(f.a.Menu,{children:[{eventKey:"Area",Name:"Area"},{eventKey:"Bar",Name:"Bar"},{eventKey:"Line",Name:"Line"},{eventKey:"Composed",Name:"Composed"}].map((function(e){return Object(s.jsx)(f.a.Item,{eventKey:e.eventKey,onSelect:n,children:e.Name},e.eventKey)}))})]})},m=a(627),x=a(626);var v=function(){return Object(s.jsxs)(m.a,{bg:"dark",variant:"dark",children:[Object(s.jsx)(m.a.Brand,{href:"#home",children:"Traffic Predictor"}),Object(s.jsxs)(x.a,{className:"mr-auto",children:[Object(s.jsx)(x.a.Link,{href:"#home",children:"About"}),Object(s.jsx)(x.a.Link,{id:"branding",end:!0,children:"Studio - Abc Wellness"})]})]})};var S=function(){return Object(s.jsx)("div",{className:"chart-header",children:"Traffic prediction"})},y=a(33),D=a(21);var k=function(e){var t=e.handleChartItemClick,a=e.data,n=a&&a.map((function(e){var t=new Date(e.classDate),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0")+"/"+a+"/"+t.getFullYear();return Object(y.a)(Object(y.a)({},e),{},{name:s})}));return Object(s.jsxs)(D.f,{width:730,height:250,data:n,children:[Object(s.jsx)(D.k,{dataKey:"name"}),Object(s.jsx)(D.l,{}),Object(s.jsx)(D.j,{}),Object(s.jsx)(D.g,{}),Object(s.jsx)(D.e,{stroke:"#f5f5f5"}),Object(s.jsx)(D.a,{type:"monotone",dataKey:"upperEstimate",fill:"#cfeb34",stroke:"#b4eb34"}),Object(s.jsx)(D.c,{onClick:function(e){t(e)},dataKey:"actual",barSize:20,fill:"#413ea0"}),Object(s.jsx)(D.h,{type:"monotone",dataKey:"forecast",stroke:"#ff7300"})]})};var T=function(e){var t=e.handleChartItemClick,a=e.data,n=function(e,a,s){t(e)},r=a&&a.map((function(e){var t=new Date(e.classDate),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0")+"/"+a+"/"+t.getFullYear();return Object(y.a)(Object(y.a)({},e),{},{name:s})}));return Object(s.jsxs)(D.b,{width:730,height:250,data:r,margin:{top:10,right:30,left:0,bottom:0},children:[Object(s.jsxs)("defs",{children:[Object(s.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(s.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(s.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),Object(s.jsxs)("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(s.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),Object(s.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),Object(s.jsx)(D.k,{dataKey:"name"}),Object(s.jsx)(D.l,{}),Object(s.jsx)(D.e,{strokeDasharray:"3 3"}),Object(s.jsx)(D.j,{}),Object(s.jsx)(D.a,{onClick:n,type:"monotone",dataKey:"forecast",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorUv)"}),Object(s.jsx)(D.a,{onClick:n,type:"monotone",dataKey:"actual",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)"})]})};var I=function(e){var t=e.handleChartItemClick,a=e.data,n=function(e){t(e)},r=a&&a.map((function(e){var t=new Date(e.classDate),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0")+"/"+a+"/"+t.getFullYear();return Object(y.a)(Object(y.a)({},e),{},{name:s})}));return Object(s.jsxs)(D.d,{width:730,height:250,data:r,children:[Object(s.jsx)(D.e,{strokeDasharray:"3 3"}),Object(s.jsx)(D.k,{dataKey:"name"}),Object(s.jsx)(D.l,{}),Object(s.jsx)(D.j,{}),Object(s.jsx)(D.g,{}),Object(s.jsx)(D.c,{bsPrefix:"bsPrefix-bar",onClick:n,dataKey:"actual",fill:"#8884d8"}),Object(s.jsx)(D.c,{bsPrefix:"bsPrefix-bar",onClick:n,dataKey:"forecast",fill:"#82ca9d"})]})};var w=function(e){var t=e.handleChartItemClick,a=e.data,n=function(e){t(e)},r=a&&a.map((function(e){var t=new Date(e.classDate),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0")+"/"+a+"/"+t.getFullYear();return Object(y.a)(Object(y.a)({},e),{},{name:s})}));return Object(s.jsxs)(D.i,{width:730,height:250,data:r,margin:{top:5,right:30,left:20,bottom:5},children:[Object(s.jsx)(D.e,{strokeDasharray:"3 3",onClick:n}),Object(s.jsx)(D.k,{dataKey:"name"}),Object(s.jsx)(D.l,{}),Object(s.jsx)(D.j,{}),Object(s.jsx)(D.g,{}),Object(s.jsx)(D.h,{onClick:n,type:"monotone",dataKey:"upperEstimate",stroke:"#b4eb34"}),Object(s.jsx)(D.h,{onClick:n,type:"monotone",dataKey:"actual",stroke:"#8884d8"}),Object(s.jsx)(D.h,{onClick:n,type:"monotone",dataKey:"forecast",stroke:"#82ca9d"})]})};var M=function(e){var t=e.selectedChart,a=e.handleChartItemClick,n=e.chartData,r=Object(s.jsx)(T,{data:n,handleChartItemClick:a});switch(t){case"Line":r=Object(s.jsx)(w,{data:n,handleChartItemClick:a});break;case"Bar":r=Object(s.jsx)(I,{data:n,handleChartItemClick:a});break;case"Composed":r=Object(s.jsx)(k,{data:n,handleChartItemClick:a})}return Object(s.jsx)("div",{children:r})},P=a(156),F=a(623),K=a(211),N=a(630),L=a(628),E=a(618),A=a(622),B=a(624),U=a(326),Y=a(621),R=function(e){var t=e.isModalOpen,a=e.toggleModalState,n=e.handleCreateClassClick,r=e.onModalInputChange,c=e.selectedClassType,l=e.instructorOptions,i=e.range;return Object(s.jsxs)(A.a,{show:t,onHide:a,children:[Object(s.jsx)(A.a.Header,{closeButton:!0,children:Object(s.jsx)(A.a.Title,{children:"Create a class"})}),Object(s.jsx)(A.a.Body,{children:Object(s.jsxs)(B.a,{children:[Object(s.jsxs)(B.a.Row,{children:[Object(s.jsxs)(B.a.Group,{as:b.a,controlId:"formGridClassType",children:[Object(s.jsx)(B.a.Label,{children:"Class Type"}),Object(s.jsx)(B.a.Control,{type:"classType",placeholder:"Class Type",value:c,disabled:!0,onChange:r})]}),Object(s.jsxs)(B.a.Group,{as:b.a,controlId:"exampleForm.SelectCustom",children:[Object(s.jsx)(B.a.Label,{children:"Instructor"}),Object(s.jsx)(Y.a,{placeholder:"Select Instructor",name:"instructor",fluid:!0,selection:!0,options:l,onChange:r})]})]}),Object(s.jsxs)(B.a.Group,{controlId:"formBasicRangeCustom",children:[Object(s.jsx)(B.a.Label,{children:"Capacity: "}),Object(s.jsxs)(B.a.Label,{children:[" ",i||50," "]}),Object(s.jsx)(B.a.Control,{type:"range",value:i,custom:!0,onChange:r})]})]})}),Object(s.jsxs)(A.a.Footer,{children:[Object(s.jsx)(U.a,{variant:"secondary",onClick:a,children:"Close"}),Object(s.jsx)(U.a,{variant:"primary",onClick:n,children:"Create"})]})]})},z=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleMenuClick=function(e,t){n.props.handleClassTimeSelection(t)},n.handleCreateClassClick=function(){n.props.handleCreateClass(n.state.formData)},n.onModalInputChange=function(e,t){t&&t.name?n.setState({formData:Object(y.a)(Object(y.a)({},n.state.formData),{},Object(P.a)({},t.name,t.value))}):n.setState({formData:Object(y.a)(Object(y.a)({},n.state.formData),{},Object(P.a)({},e.target.type,e.target.value))})},n.handleClassTypeClick=function(e){n.props.handleClassTypeClick(e.target.textContent)},n.popover=function(){var e=n.props.selectedClassTime;return Object(s.jsxs)(N.a,{id:"popover-basic",children:[Object(s.jsx)(N.a.Title,{as:"h3",children:"Choose class you want to create"}),e&&e.value&&e.value.classSuggestions&&e.value.classSuggestions.map((function(e){return Object(s.jsx)(N.a.Content,{onClick:n.handleClassTypeClick,children:e.className})}))]})},n.getDate=function(){var e=n.props.selectedChartItem,t=new Date(e.classDate),a=new Intl.DateTimeFormat("en-US",{month:"long"}).format(t),s=String(t.getDate()).padStart(2,"0");return a.substr(0,3)+" "+s},n.getParsedDate=function(e,t){var a=new Date(e),s=new Date(t),n=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),r=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return"".concat(n," - ").concat(r)},n.getAvailableInstructorsPerClass=function(){var e=n.props,t=e.selectedClassTime,a=e.selectedClassType,s=[];t&&t.value&&t.value.classSuggestions&&t.value.classSuggestions.forEach((function(e){e.className===a&&(s=e.availableInstructors)}));var r=[];return s.forEach((function(e){r.push({key:e.name.toLowerCase(),value:e.id,text:e.name})})),r},n.state={formData:{range:50},availableInstructors:0},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isModalOpen,n=t.toggleModalState,r=t.availableInstructors,c=t.suggestedClassesPerDate,l=t.selectedClassTime;return Object(s.jsxs)("div",{children:[Object(s.jsxs)(F.a,{vertical:!0,children:[Object(s.jsx)(F.a.Item,{active:!0,children:Object(s.jsx)("h5",{children:"Required Classes for ".concat(this.getDate(),"\n                  (Available instructors - ").concat(r?r.length:0,")")})},"menu-header"),c?c.length>0?c.map((function(t){return Object(s.jsx)(L.a,{trigger:"click",placement:"right",overlay:e.popover(),rootClose:!0,children:Object(s.jsxs)(F.a.Item,{name:e.getParsedDate(t.classSuggestedDate),value:t,active:l.name===e.getParsedDate(t.classSuggestedDate),onClick:e.handleMenuClick,children:[Object(s.jsx)(K.a,{children:t.classSuggestions.length}),e.getParsedDate(t.classSuggestedDate,t.classSuggestedEndDate)]},e.getParsedDate(t.classSuggestedDate))})})):Object(s.jsx)(F.a.Item,{active:!0,children:Object(s.jsx)("h5",{children:"No Suggestion for this date."})},"no-item"):Object(s.jsx)(E.a,{animation:"grow"})]}),Object(s.jsx)(R,{isModalOpen:a,toggleModalState:n,handleCreateClassClick:this.handleCreateClassClick,onModalInputChange:this.onModalInputChange,selectedClassType:this.props.selectedClassType,instructorOptions:this.getAvailableInstructorsPerClass(),range:this.state.formData.range})]})}}]),a}(n.Component),G=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleDatesChange=function(e,t){if(t.value&&2===t.value.length){var a=new Date(t.value[0]),n=new Date(t.value[1]),r=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),l=a.getFullYear(),i=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),d=n.getFullYear();a=c+"/"+r+"/"+l,n=o+"/"+i+"/"+d,s.fetchTrafficPrediction(a,n)}else null===t.value&&s.fetchTrafficPrediction();s.setState({selectedDates:t.value})},s.handleChartSelection=function(e){s.setState({selectedChart:e})},s.handleClassTimeSelection=function(e){s.setState({selectedClassTime:e})},s.handleChartItemClick=function(e){var t=new Date(e.classDate),a=new Intl.DateTimeFormat("en-US",{month:"long"}).format(t),n=String(t.getDate()).padStart(2,"0"),r=t.getFullYear();t=a+"/"+n+"/"+r,s.fetchAvailableInstructors(t),s.fetchClassSuggestion(t),s.setState({selectedChartItem:e})},s.toggleModalState=function(){s.setState({isModalOpen:!s.state.isModalOpen})},s.handleCreateClass=function(e){if(void 0!==e.instructor&&null!==e.instructor){var t=new Date,a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();t=r+"-"+n+"-"+a;var c=s.state.selectedClassTime&&s.state.selectedClassTime.name,l=(Number(c.split(":")[0])+1).toString()+":00",i={scheduledDate:t,startTime:c,endTime:l,className:s.state.selectedClassType,instructorId:e.instructor,capacity:Number(e.range?e.range:50),classId:0};s.postCreateClass(i),s.setState({selectedChartItem:null,isModalOpen:!s.state.isModalOpen})}else alert("Please select the instructor for the class")},s.handleClassTypeClick=function(e){s.setState({selectedClassType:e,isModalOpen:!0})},s.fetchForecast=function(){C.a.get("https://transformer-businessengine.azurewebsites.net/api/Forecast").then((function(e){console.log("fetchForecast",e)}))},s.fetchTrafficPrediction=function(e,t){var a,n;if(e)a=e;else{var r=new Date,c=String(r.getDate()).padStart(2,"0");a=String(r.getMonth()+1).padStart(2,"0")+"/"+c+"/"+r.getFullYear()}if(t)n=t;else{var l=new Date,i=String(l.getDate()+7).padStart(2,"0");n=String(l.getMonth()+1).padStart(2,"0")+"/"+i+"/"+l.getFullYear()}C.a.get("https://transformer-businessengine.azurewebsites.net/api/TrafficPredictor?StartDate=".concat(a,"&EndDate=").concat(n)).then((function(e){s.setState({trafficPredictionData:e.data.data})}))},s.fetchAvailableInstructors=function(e){C.a.get("https://transformer-businessengine.azurewebsites.net/api/TrafficPredictor/AvailableInstructor/?AvailableDate=".concat(e)).then((function(e){s.setState({availableInstructors:e.data.data.availableInstructors})}))},s.fetchClassSuggestion=function(e){s.setState({suggestedClassesPerDate:null}),C.a.get("https://transformer-businessengine.azurewebsites.net/api/TrafficPredictor/ClassSuggestion?ClassSuggestedDate=".concat(e)).then((function(e){s.setState({suggestedClassesPerDate:e.data.data?e.data.data:[]})}))},s.postCreateClass=function(e){C.a.post("https://transformer-businessengine.azurewebsites.net/api/ScheduleClass",e).then((function(e){alert("Class created successfully")})).catch((function(e){alert("Class created successfully")}))},s.state={selectedChart:"Bar",selectedClassTime:"",selectedChartItem:null,isModalOpen:!1,selectedDates:null},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchTrafficPrediction()}},{key:"render",value:function(){var e=this.state.suggestedClassesPerDate;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(v,{}),Object(s.jsxs)(h.a,{children:[Object(s.jsx)(S,{}),Object(s.jsxs)(u.a,{children:[Object(s.jsx)(b.a,{children:Object(s.jsx)(M,{chartData:this.state.trafficPredictionData,selectedChart:this.state.selectedChart,handleChartItemClick:this.handleChartItemClick})}),Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{onChange:this.handleDatesChange,type:"range"})}),Object(s.jsx)(b.a,{})]}),Object(s.jsxs)(u.a,{children:[Object(s.jsx)(b.a,{children:this.state.selectedChartItem&&Object(s.jsx)(z,{handleClassTimeSelection:this.handleClassTimeSelection,selectedClassTime:this.state.selectedClassTime,suggestedClassesPerDate:e,isModalOpen:this.state.isModalOpen,toggleModalState:this.toggleModalState,handleCreateClass:this.handleCreateClass,selectedChartItem:this.state.selectedChartItem,availableInstructors:this.state.availableInstructors,handleClassTypeClick:this.handleClassTypeClick,selectedClassType:this.state.selectedClassType})}),Object(s.jsx)("div",{style:{marginLeft:"15rem"},children:Object(s.jsx)(O,{bsPrefix:"chartdropdown-bsprefix",handleChartSelection:this.handleChartSelection,selectedChart:this.state.selectedChart})}),Object(s.jsx)(b.a,{})]})]})]})}}]),a}(n.Component),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,631)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};a(599),a(600);l.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(G,{})}),document.getElementById("root")),J()}},[[601,1,2]]]);
//# sourceMappingURL=main.aefe6110.chunk.js.map